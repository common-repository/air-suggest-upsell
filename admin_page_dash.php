<?phpfunction airs_option_page(){    ob_start(); ?>    <style type="text/css">        .successMsg {            padding: 20px;            color: #3c763d;            background-color: #dff0d8;            border-color: #d6e9c6;        }        .errorMsg {            padding: 20px;            color: #a94442;            background-color: #f2dede;            border-color: #ebccd1;        }        .air-disp-n {            display: none        }        .air-disp-b {            display: block        }    </style>    <div class="wrap">        <div class="edit-pic-details">            <h1>Air Suggest Settings</h1>            <?php            settings_fields('airs_setting_group');            ?>        </div>    </div>    <div class="wrap">        <input type="text" name="air-suggest-api-key" class="air-suggest-api-key" style="width: 340px"               placeholder="Enter Store Api Key" value=""/>        <input type="hidden" id="airs-nonce" name="airs-nonce"               value="<?php echo wp_create_nonce('save_airs_details'); ?>">        <a href="javascript:void(0)" class="button-primary" onclick="checkApiKey()">Submit</a>        <p class="successMsg air-disp-n"></p>        <p class="errorMsg air-disp-n"></p>    </div>    <script type="text/javascript">        var $ = jQuery;        var AdminAPIURL = 'https://www.airsuggest.com/api/';        var shopDomain = window.location.hostname;        var formData = new FormData();        formData.append('shopDomain', shopDomain);        formData.append('security', $.trim($('#airs-nonce').val()));        $.ajax({            type: 'POST',            url: AdminAPIURL + 'check_api',            data: formData,            dataType: 'json',            contentType: false,            cache: false,            processData: false,            beforeSend: function () {            },            success: function (response) {                if (response.code == 200) {                    if (response.api_setup == '1') {                        $('.air-suggest-api-key').val(response.apiKey);                        $('.successMsg').removeClass('air-disp-b');                        $('.successMsg').addClass('air-disp-n');                        $('.errorMsg').removeClass('air-disp-b');                        $('.errorMsg').addClass('air-disp-n');                    }                } else {                    $('.errorMsg').text(response.message);                    $('.successMsg').removeClass('air-disp-b');                    $('.successMsg').addClass('air-disp-n');                    $('.errorMsg').removeClass('air-disp-n');                    $('.errorMsg').addClass('air-disp-b');                }            }        });        function checkApiKey() {            if ($.trim($('.air-suggest-api-key').val())) {                var formData = new FormData();                formData.append('api_key', $.trim($('.air-suggest-api-key').val()));                formData.append('shopDomain', shopDomain);                $.ajax({                    type: 'POST',                    url: AdminAPIURL + 'verify_api',                    data: formData,                    dataType: 'json',                    contentType: false,                    cache: false,                    processData: false,                    beforeSend: function () {                    },                    success: function (response) {                        if (response.code == 200) {                            $('.successMsg').text('API Key has been verified successfully for your shop.');                            $('.successMsg').removeClass('air-disp-n');                            $('.successMsg').addClass('air-disp-b');                            $('.errorMsg').removeClass('air-disp-b');                            $('.errorMsg').addClass('air-disp-n');                        } else {                            $('.errorMsg').text(response.message);                            $('.successMsg').removeClass('air-disp-b');                            $('.successMsg').addClass('air-disp-n');                            $('.errorMsg').removeClass('air-disp-n');                            $('.errorMsg').addClass('air-disp-b');                        }                    }                });            } else {                $('.errorMsg').text('Enter API Key');                $('.successMsg').removeClass('air-disp-b');                $('.successMsg').addClass('air-disp-n');                $('.errorMsg').removeClass('air-disp-n');                $('.errorMsg').addClass('air-disp-b');            }        }    </script>    <?php    echo ob_get_clean();}function register_airs_menu_page(){    add_menu_page('Air Suggest', 'Air Suggest', 'manage_options', 'air-suggest-dashboard', 'airs_option_page');}add_action('admin_menu', 'register_airs_menu_page');function airs_register_settings(){    register_setting('airs_setting_group', 'airs_setting');}add_action('admin_init', 'airs_register_settings');function airs_load_scripts(){    wp_enqueue_style('airs_style', plugin_dir_url(__FILE__) . 'css/airs-style.css', array(), time(), false);    wp_enqueue_script('airs_script_jq_carrousel', plugin_dir_url(__FILE__) . 'js/jquery-accessible-carrousel-aria.js', array('jquery'), time(), true);    wp_enqueue_script('airs_script_slider', plugin_dir_url(__FILE__) . 'js/slider.js', array('jquery'), time(), true);    wp_enqueue_script('airs_script', plugin_dir_url(__FILE__) . 'js/airs-main.js', array('jquery'), time(), true);}add_action('wp_enqueue_scripts', 'airs_load_scripts', 99);function AirSuggestUpSellOnProductPage(){    global $product;    echo '<div id="page">    <input type="hidden" id="airs-plug-path" value="' . plugin_dir_url(__FILE__) . '" />    <input type="hidden" id="airs-nonce" name="airs-nonce" value="'. wp_create_nonce( 'save_airs_details' ).'">        <input type="hidden" name="airs-categories" id="airs-categories" value="'.airs_get_product_categories_in_hierarchy($product->get_id()).'" />    <div class="carrousel relative mb2">        <div class="carrousel__container mod--hidden mb1" data-carrousel-btn-previous-img="' . plugin_dir_url(__FILE__) . '/images/arrow-right.png"             data-carrousel-btn-next-img="' . plugin_dir_url(__FILE__) . '/images/arrow-left.png" data-carrousel-btn-previous-text="previous "             data-carrousel-btn-next-text=" next" data-carrousel-prefix-classes="news"             data-carrousel-span-text="Contenu" data-carrousel-span-text-class="invisible"             data-carrousel-transition="slide" data-carrousel-hx="h3">            <div class="carrousel__content">                <div class="wraper wrapermain">                    <div id="tabs1">                        <ul class="tabnav">                            <li><a href="javascript:void(0)" onclick="AirsopenTab(\'#BoughTogther\')">Bough Togther</a></li>                            <li><a href="javascript:void(0)" onclick="AirsopenTab(\'#Cheaperoption\')">Cheaper option</a></li>                            <li><a href="javascript:void(0)" onclick="AirsopenTab(\'#BestValue\')">Best Value </a></li>                        </ul>                        <div class="btnnav airtags0">                            <ul>                                                            </ul>                            <label class="switch"><input type="checkbox" id="btnPassport1" value="NO"                                                         name="btnPassport1">                                <div class="slider round "><!--ADDED HTML --><span class="off">ON</span><span                                        class="on">OFF</span><!--END--></div>                            </label>                        </div>                        <div class="filtersarea filtersareamain">                            <div class="searcharea">                                <input name="" type="button" class="sarchbtn"><input name="" id="airs-search" onkeyup="airsSearchProduct(\'airs-search\',\'0\')" type="text"                                                                                     placeholder="Search by title, name, catagories">                            </div>                            <div class="filtersarealtmain">                                <div class="center filter">                                    <select name="sources" id="sources" class="custom-select sources"                                            placeholder="Short by Newest">                                        <option value="Short by: A to Z">Short by: A to Z</option>                                        <option value="Short by: Z to A">Short by: Z to A</option>                                        <option value="Short by: Low to High">Short by: Low to High</option>                                        <option value="Short by: High to Low">Short by: High to Low</option>                                        <option value="Short by: Avg Rating">Short by: Avg Rating</option>                                    </select>                                </div>                                <div class="center items">                                    <select name="sources" id="sources1" class="custom-select sources"                                            placeholder="Items">                                        <option value="10 Items">10 Items</option>                                        <option value="15 Items">15 Items</option>                                        <option value="20 Items">20 Items</option>                                        <option value="25 Items">25 Items</option>                                        <option value="30 Items">30 Items</option>                                    </select>                                </div>                            </div>                        </div>                        <div id="BoughTogther" class="airs-tabs airs-d-block">                            <div class="productRow productRow0">                                <ul>                                                                    </ul>                            </div>                            <button onclick="AirsFunction1()" class="showhidebtn"><img src="' . plugin_dir_url(__FILE__) . '/images/showhidebtn.png"                                                                                     width="19" height="20"></button>                            <div style="display:none" id="myDIV1">                                <div class="contentsection">                                    <div class="wraper">                                        <div class="productRow productRow1">                                            <ul>                                                                                            </ul>                                        </div>                                    </div>                                </div>                            </div>                        </div>                        <div id="Cheaperoption" class="airs-tabs airs-d-none">                            <div class="productRow productRow2">                                <ul>                                </ul>                            </div>                            <button onclick="AirsFunction2()" class="showhidebtn"><img src="' . plugin_dir_url(__FILE__) . '/images/showhidebtn.png"                                                                                     width="19" height="20"></button>                            <div style="display:none" id="myDIV2">                                <div class="contentsection">                                    <div class="wraper">                                        <div class="productRow productRow3">                                            <ul>                                                                                            </ul>                                        </div>                                    </div>                                </div>                            </div>                        </div>                        <div id="BestValue" class="airs-tabs airs-d-none">                            <div class="productRow productRow4">                                <ul>                                                                    </ul>                            </div>                            <button onclick="AirsFunction3()" class="showhidebtn"><img src="' . plugin_dir_url(__FILE__) . '/images/showhidebtn.png"                                                                                     width="19" height="20"></button>                            <div style="display:none" id="myDIV3">                                <div class="contentsection">                                    <div class="wraper">                                        <div class="productRow productRow5">                                            <ul>                                                                                            </ul>                                        </div>                                    </div>                                </div>                            </div>                        </div>                    </div>                </div>            </div>            <div class="carrousel__content">                <div class="wraper wrapermain">                    <div id="tabs2">                        <ul class="tabnav">                            <li><a href="javascript:void(0)" onclick="AirsopenTab(\'#BoughTogther2\')">Bough Togther</a></li>                            <li><a href="javascript:void(0)" onclick="AirsopenTab(\'#Cheaperoption2\')">Cheaper option</a></li>                            <li><a href="javascript:void(0)" onclick="AirsopenTab(\'#BestValue2\')">Best Value </a></li>                        </ul>                        <div class="btnnav airtags1">                            <ul>                            </ul>                            <label class="switch"><input type="checkbox" id="btnPassport2" value="No"                                                         name="btnPassport2">                                <div class="slider round "><!--ADDED HTML --><span class="off">ON</span><span                                        class="on">OFF</span><!--END--></div>                            </label>                        </div>                        <div class="filtersarea filtersareamain">                            <div class="searcharea">                                <input name="" type="button" class="sarchbtn"><input name="" id="airs-search1" onkeyup="airsSearchProduct(\'airs-search1\',\'1\')" type="text"                                                                                     placeholder="Search by title, name, catagories">                            </div>                            <div class="filtersarealtmain">                                <div class="center filter">                                    <select name="sources" id="sources3" class="custom-select sources"                                            placeholder="Short by Newest">                                        <option value="Short by: A to Z">Short by: A to Z</option>                                        <option value="Short by: Z to A">Short by: Z to A</option>                                        <option value="Short by: Low to High">Short by: Low to High</option>                                        <option value="Short by: High to Low">Short by: High to Low</option>                                        <option value="Short by: Avg Rating">Short by: Avg Rating</option>                                    </select>                                </div>                                <div class="center items">                                    <select name="sources" id="sources4" class="custom-select sources"                                            placeholder="Items">                                        <option value="10 Items">10 Items</option>                                        <option value="15 Items">15 Items</option>                                        <option value="20 Items">20 Items</option>                                        <option value="25 Items">25 Items</option>                                        <option value="30 Items">30 Items</option>                                    </select>                                </div>                            </div>                        </div>                        <div id="BoughTogther2" class="airs-tabs airs-d-block">                            <div class="productRow productRow6">                                <ul>                                </ul>                            </div>                            <button onclick="AirsFunction4()" class="showhidebtn"><img src="' . plugin_dir_url(__FILE__) . '/images/showhidebtn.png"                                                                                     width="19" height="20"></button>                            <div style="display:none" id="myDIV4">                                <div class="contentsection">                                    <div class="wraper">                                        <div class="productRow productRow7">                                            <ul>                                            </ul>                                        </div>                                    </div>                                </div>                            </div>                        </div>                        <div id="Cheaperoption2" class="airs-tabs airs-d-none">                            <div class="productRow productRow8">                                <ul>                                </ul>                            </div>                            <button onclick="AirsFunction5()" class="showhidebtn"><img src="' . plugin_dir_url(__FILE__) . '/images/showhidebtn.png"                                                                                     width="19" height="20"></button>                            <div style="display:none" id="myDIV5">                                <div class="contentsection">                                    <div class="wraper">                                        <div class="productRow productRow9">                                            <ul>                                            </ul>                                        </div>                                    </div>                                </div>                            </div>                        </div>                        <div id="BestValue2" class="airs-tabs airs-d-none">                            <div class="productRow productRow10">                                <ul>                                </ul>                            </div>                            <button onclick="AirsFunction6()" class="showhidebtn"><img src="' . plugin_dir_url(__FILE__) . '/images/showhidebtn.png"                                                                                     width="19" height="20"></button>                            <div style="display:none" id="myDIV6">                                <div class="contentsection">                                    <div class="wraper">                                        <div class="productRow productRow11">                                            <ul>                                            </ul>                                        </div>                                    </div>                                </div>                            </div>                        </div>                    </div>                </div>            </div>        </div>    </div></div>';}function airs_get_product_categories_in_hierarchy($productID){    $terms = get_the_terms($productID, 'product_cat');    $cat1 = '';    $cat2 = '';    $cat3 = '';    foreach ($terms as $data) {        $ancestors = get_ancestors($data->term_id, 'product_cat');        if (count($ancestors) == 2) {            $cat3 = $data->name;        } elseif (count($ancestors) == 1) {            $cat2 = $data->name;        } else {            $cat1 = $data->name;        }    }    return $cat1 . (!empty($cat2) ? (!empty($cat3) ? '|||' . $cat2 . '|||' . $cat3 : '|||' . $cat2) : '');}add_action('woocommerce_after_single_product_summary', 'AirSuggestUpSellOnProductPage');?>